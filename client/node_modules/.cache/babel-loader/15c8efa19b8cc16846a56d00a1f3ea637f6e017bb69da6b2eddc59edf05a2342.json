{"ast":null,"code":"import { Component } from \"react\";\nimport { addTask, getTasks, updateTask, deleteTask } from \"./services/taskServices\";\nclass Tasks extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      tasks: [],\n      currentTask: \"\"\n    };\n    this.handleChange = ({\n      currentTarget: input\n    }) => {\n      this.setState({\n        currentTask: input.value\n      });\n    };\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const originalTasks = this.state.tasks || [];\n      try {\n        const {\n          data\n        } = await addTask({\n          task: this.state.currentTask\n        });\n        console.log(\"Received data from addTask:\", data);\n        const tasks = [...originalTasks, data]; // Create a new array with the updated data\n        this.setState({\n          tasks,\n          currentTask: \"\"\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    this.handleUpdate = async currentTask => {\n      let tasks;\n      const originalTasks = this.state.tasks;\n      try {\n        tasks = [...originalTasks];\n        const index = tasks.findIndex(task => task._id === currentTask);\n        tasks[index] = {\n          ...tasks[index]\n        };\n        tasks[index].completed = !tasks[index].completed;\n        this.setState({\n          tasks\n        });\n        await updateTask(currentTask, {\n          completed: tasks[index].completed\n        });\n      } catch (error) {\n        this.setState({\n          tasks: originalTasks\n        });\n        console.log(error);\n      } finally {\n        // This block will be executed regardless of success or failure\n        this.setState({\n          tasks\n        });\n      }\n    };\n    this.handleDelete = async currentTask => {\n      // Log the received currentTask to understand its structure\n      console.log(\"Received currentTask for deletion:\", currentTask);\n      const originalTasks = this.state.tasks;\n      try {\n        // Ensure that the task ID is not undefined before proceeding\n        if (!currentTask) {\n          console.error(\"Task ID is undefined. Aborting deletion.\");\n          return;\n        }\n        const tasks = originalTasks.filter(task => task._id !== currentTask);\n        this.setState({\n          tasks\n        });\n        await deleteTask(currentTask); // Pass the task ID directly as a string\n\n        setTimeout(() => {\n          window.location.reload();\n        }, 5);\n      } catch (error) {\n        this.setState({\n          tasks: originalTasks\n        });\n        console.log(\"Error deleting task:\", error);\n      }\n    };\n  }\n  async componentDidMount() {\n    try {\n      const {\n        data\n      } = await getTasks();\n      console.log(\"Received tasks:\", data);\n      this.setState({\n        tasks: data\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\nexport default Tasks;","map":{"version":3,"names":["Component","addTask","getTasks","updateTask","deleteTask","Tasks","constructor","args","state","tasks","currentTask","handleChange","currentTarget","input","setState","value","handleSubmit","e","preventDefault","originalTasks","data","task","console","log","error","handleUpdate","index","findIndex","_id","completed","handleDelete","filter","setTimeout","window","location","reload","componentDidMount"],"sources":["/Users/joyrattoo/Downloads/todo-mern-app-master/client/src/Tasks.js"],"sourcesContent":["import { Component } from \"react\";\nimport {\n    addTask,\n    getTasks,\n    updateTask,\n    deleteTask,\n} from \"./services/taskServices\";\n\nclass Tasks extends Component {\n    state = { tasks: [], currentTask: \"\" };\n\n    async componentDidMount() {\n        try {\n            const { data } = await getTasks();\n\n            console.log(\"Received tasks:\", data);\n\n            this.setState({ tasks: data });\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    handleChange = ({ currentTarget: input }) => {\n        this.setState({ currentTask: input.value });\n    };\n\n    handleSubmit = async (e) => {\n        e.preventDefault();\n        const originalTasks = this.state.tasks || [];\n        try {\n            const { data } = await addTask({ task: this.state.currentTask });\n            console.log(\"Received data from addTask:\", data);\n            const tasks = [...originalTasks, data]; // Create a new array with the updated data\n            this.setState({ tasks, currentTask: \"\" });\n        } catch (error) {\n            console.log(error);\n        }\n    };\n\n    handleUpdate = async (currentTask) => {\n        let tasks;\n        const originalTasks = this.state.tasks;\n        try {\n            tasks = [...originalTasks];\n            const index = tasks.findIndex((task) => task._id === currentTask);\n            tasks[index] = { ...tasks[index] };\n            tasks[index].completed = !tasks[index].completed;\n            this.setState({ tasks });\n            await updateTask(currentTask, {\n                completed: tasks[index].completed,\n            });\n            \n        } catch (error) {\n            this.setState({ tasks: originalTasks });\n            console.log(error);\n        }\n        finally {\n            // This block will be executed regardless of success or failure\n            this.setState({ tasks });\n        }\n    };\n\n    handleDelete = async (currentTask) => {\n        // Log the received currentTask to understand its structure\n        console.log(\"Received currentTask for deletion:\", currentTask);\n    \n        const originalTasks = this.state.tasks;\n    \n        try {\n            // Ensure that the task ID is not undefined before proceeding\n            if (!currentTask) {\n                console.error(\"Task ID is undefined. Aborting deletion.\");\n                return;\n            }\n    \n            const tasks = originalTasks.filter((task) => task._id !== currentTask);\n            this.setState({ tasks });\n\n\n            await deleteTask(currentTask); // Pass the task ID directly as a string\n\n            setTimeout(() => {\n                window.location.reload();\n              }, 5);\n            \n\n        } catch (error) {\n            this.setState({ tasks: originalTasks });\n            console.log(\"Error deleting task:\", error);\n        }\n    };\n}\n\nexport default Tasks;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}