{"ast":null,"code":"import { Component } from \"react\";\nimport { addTask, getTasks, updateTask, deleteTask } from \"./services/taskServices\";\nclass Tasks extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      tasks: [],\n      currentTask: \"\"\n    };\n    this.handleChange = ({\n      currentTarget: input\n    }) => {\n      this.setState({\n        currentTask: input.value\n      });\n    };\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const originalTasks = this.state.tasks;\n      try {\n        const {\n          data\n        } = await addTask({\n          task: this.state.currentTask\n        });\n        const tasks = originalTasks;\n        tasks.push(data);\n        this.setState({\n          tasks,\n          currentTask: \"\"\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    this.handleUpdate = async currentTask => {\n      const originalTasks = this.state.tasks;\n      try {\n        const tasks = [...originalTasks];\n        const index = tasks.findIndex(task => task._id === currentTask);\n        tasks[index] = {\n          ...tasks[index]\n        };\n        tasks[index].completed = !tasks[index].completed;\n        this.setState({\n          tasks\n        });\n        await updateTask(currentTask, {\n          completed: tasks[index].completed\n        });\n      } catch (error) {\n        this.setState({\n          tasks: originalTasks\n        });\n        console.log(error);\n      }\n    };\n    this.handleDelete = async currentTask => {\n      // Log the received currentTask to understand its structure\n      console.log(\"Received currentTask for deletion:\", currentTask);\n      const originalTasks = this.state.tasks;\n      try {\n        // Ensure that the task ID is not undefined before proceeding\n        if (!currentTask) {\n          console.error(\"Task ID is undefined. Aborting deletion.\");\n          return;\n        }\n        const tasks = originalTasks.filter(task => task._id !== currentTask);\n        this.setState({\n          tasks\n        });\n        await deleteTask(currentTask); // Pass the task ID directly as a string\n      } catch (error) {\n        this.setState({\n          tasks: originalTasks\n        });\n        console.log(\"Error deleting task:\", error);\n      }\n    };\n  }\n  async componentDidMount() {\n    try {\n      const {\n        data\n      } = await getTasks();\n      console.log(\"Received tasks:\", data);\n      this.setState({\n        tasks: data\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\nexport default Tasks;","map":{"version":3,"names":["Component","addTask","getTasks","updateTask","deleteTask","Tasks","constructor","args","state","tasks","currentTask","handleChange","currentTarget","input","setState","value","handleSubmit","e","preventDefault","originalTasks","data","task","push","error","console","log","handleUpdate","index","findIndex","_id","completed","handleDelete","filter","componentDidMount"],"sources":["/Users/joyrattoo/Downloads/todo-mern-app-master/client/src/Tasks.js"],"sourcesContent":["import { Component } from \"react\";\nimport {\n    addTask,\n    getTasks,\n    updateTask,\n    deleteTask,\n} from \"./services/taskServices\";\n\nclass Tasks extends Component {\n    state = { tasks: [], currentTask: \"\" };\n\n    async componentDidMount() {\n        try {\n            const { data } = await getTasks();\n\n            console.log(\"Received tasks:\", data);\n\n            this.setState({ tasks: data });\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    handleChange = ({ currentTarget: input }) => {\n        this.setState({ currentTask: input.value });\n    };\n\n    handleSubmit = async (e) => {\n        e.preventDefault();\n        const originalTasks = this.state.tasks;\n        try {\n            const { data } = await addTask({ task: this.state.currentTask });\n            const tasks = originalTasks;\n            tasks.push(data);\n            this.setState({ tasks, currentTask: \"\" });\n        } catch (error) {\n            console.log(error);\n        }\n    };\n\n    handleUpdate = async (currentTask) => {\n        const originalTasks = this.state.tasks;\n        try {\n            const tasks = [...originalTasks];\n            const index = tasks.findIndex((task) => task._id === currentTask);\n            tasks[index] = { ...tasks[index] };\n            tasks[index].completed = !tasks[index].completed;\n            this.setState({ tasks });\n            await updateTask(currentTask, {\n                completed: tasks[index].completed,\n            });\n        } catch (error) {\n            this.setState({ tasks: originalTasks });\n            console.log(error);\n        }\n    };\n\n    handleDelete = async (currentTask) => {\n        // Log the received currentTask to understand its structure\n        console.log(\"Received currentTask for deletion:\", currentTask);\n    \n        const originalTasks = this.state.tasks;\n    \n        try {\n            // Ensure that the task ID is not undefined before proceeding\n            if (!currentTask) {\n                console.error(\"Task ID is undefined. Aborting deletion.\");\n                return;\n            }\n    \n            const tasks = originalTasks.filter((task) => task._id !== currentTask);\n            this.setState({ tasks });\n            await deleteTask(currentTask); // Pass the task ID directly as a string\n        } catch (error) {\n            this.setState({ tasks: originalTasks });\n            console.log(\"Error deleting task:\", error);\n        }\n    };\n}\n\nexport default Tasks;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}